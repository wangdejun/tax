<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ä¸ªäººæ‰€å¾—ç¨è®¡ç®—</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name='description' content='ä¸ªäººæ‰€å¾—ç¨è®¡ç®—,è®¡ç®—,äº”é™©ä¸€é‡‘è®¡ç®—,äº”é™©ä¸€é‡‘,ä¸ªäººæ‰€å¾—ç¨'>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <style>
        /*
        reset.css
        */
        html, body{
            padding:0px;
            margin:0px;
            padding:10px;
        }
        ul{
            margin:10px;
            padding:0px;
        }
        h1{
            margin-top:10px;
            margin-bottom:10px;
            font-size: 25px
        }
        /*Normal CSS*/
        #price > ul >li{
            list-style: none;
            border:1px solid #eee;
            box-shadow: 3px 3px 5px #aaa;
            background-color:olivedrab;
            padding:5px 10px;
            margin:5px;
            color:#fff;
        }
        #price > ul > span{
            display: inline-block;
            width:100%;
            text-align: left;
        }
        #price > button{
            display: inline-block;
            width:100%;
        }
        #price input{
            border:1px solid #aaa;
            box-sizing: border-box;
            margin-top:10px;
            display: inline-block;
            width:100%;
            height:2rem;
        }
        a{
            text-decoration: none;
            color:olivedrab;
        }
    </style>
</head>

<body>
    <div id="price">
        <h1>ä¸ªäººæ‰€å¾—ç¨è®¡ç®—</h1>
        <input id='input-price' @keyup="getSalary($event)" placeholder="åœ¨æ­¤è¾“å…¥ç¨å‰å·¥èµ„é‡‘é¢"></input>
        <div id="badge">
                <!--
                <span v-if="this.salary>5000">ä¸é”™å“¦</span>
                <span v-if="this.salary>10000">ä¸é”™å“¦æ£’æ£’çš„ğŸ‘</span>
                <span v-if="this.salary>15000">å“‡å¡ï¼Œé«˜æ”¶å…¥äººç¾¤å“¦</span>
                <span v-if="this.salary>20000">å“Ÿå‘µï¼Œä½ å·²ç»æ­¥å…¥é¡¶çº§é«˜æ”¶å…¥äººç¾¤</span>
                <span v-if="this.salary>50000">æ‰“å·¥ä¸€æ—çš„é¡¶å³°</span>
                <span v-if="this.salary>80000">æ‰“å·¥çš‡å¸</span>-->
                <span v-if="this.salary>20000" style="background-color:crimson;color:#fff">åœŸè±ªï¼Œæˆ‘ä»¬è¿˜æœ‰æœºä¼šåšæœ‹å‹å—</span>
        </div>
        <ul>
            <span><strong>ä¸ªäººæ‰€å¾—ç¨</strong></span>
            <li>ç¨å‰å·¥èµ„: {{salary}}å…ƒ</li>
            <li>ä¸ªäººæ‰€å¾—ç¨ï¼š{{Math.round(tax)}}å…ƒ</li>
            <li>ä¸ªç¨åå·¥èµ„ï¼š {{afterTax}}å…ƒ</li>
        </ul>
        <ul>
            <span><strong>äº”é™©ä¸€é‡‘ç¼´çº³</strong></span>
            <li>ä½æˆ¿å…¬ç§¯é‡‘: {{Math.round(house)}}å…ƒ<br><small>ç¨ç‡12%(ä¸ªäººå‡ºèµ„é¢)</small></li>
            <li>å…»è€ä¿é™©ï¼š{{Math.round(hospital)}}å…ƒ </li>
            <li>å¤±ä¸šä¿é™©ï¼š {{Math.round(unemployment)}}å…ƒ</li>
            <li>å…»è€ä¿é™©ï¼š {{Math.round(age)}}å…ƒ</li>            
            <li>æ€»è®¡ï¼š {{Math.round(sumSecurity)}}å…ƒ</li>   
        </ul>
        <ul>æ€»è®¡ç¨åå·¥èµ„ï¼š
            <li>
                {{Math.round(afterAll)}}
            </li>
        </ul>
        </ul>
    </div>

    <footer>
        <a href="mailto:88dejun@gmail.com?subject=ä¸ªç¨è®¡ç®—åé¦ˆ&body=Hi,dejun,æˆ‘æƒ³åé¦ˆçš„é—®é¢˜æ˜¯ï¼š">å‘é€é‚®ä»¶åé¦ˆè®¡ç®—é—®é¢˜</a>
    </footer>

    <script>
        var myApp = new Vue({
            el: '#price',
            data: {
                salary: 0,
            },
            computed:{
                tax:{
                    get:function(){
                        if(this.salary<=1500)
                            return this.salary * 0.03;
                        if(this.salary<=4500)
                            return (this.salary-1500)*0.1 + 1500*0.03;
                        if(this.salary<=9000)
                            return (this.salary-4500)*0.2 + 3000*0.1 + 1500*0.03;
                        if(this.salary<=35000)
                            return (this.salary-9000)*0.25 + 4500*0.2 + 3000*0.1 + 1500*0.03;
                        if(this.salary<=55000)
                            return (this.salary-35000)*0.3 +26000*0.25 + 4500*0.2 + 3000*0.1 + 1500*0.03;
                        if(this.salary<=80000)
                            return (this.salary-55000)*0.35 + 20000*0.3 +26000*0.25 + 4500*0.2 + 3000*0.1 + 1500*0.03;
                        else
                            return (this.salary-80000)*0.45 + 25000*0.35 + 20000*0.3 +26000*0.25 + 4500*0.2 + 3000*0.1 + 1500*0.03;
                    },
                    set:function(value){
                        this.salary = Math.round(value / 0.5);
                    }
                },
                afterTax:function(){
                    return Math.round(this.salary - this.tax);
                },
                age:function(){
                    return this.salary * 0.08;
                },
                unemployment:function(){
                    return this.salary * 0.01;
                },
                hospital:function(){
                    return this.salary * 0.02;
                },
                house:function(){
                    return this.salary * 0.08;
                },
                sumSecurity:function(){
                    return this.age + this.unemployment + this.hospital + this.house
                },
                afterAll:function(){
                    return this.afterTax-this.sumSecurity
                }
            },
            methods:{
                getSalary:function(event){
                    console.log(event.srcElement.value)
                    this.salary = Math.round(event.srcElement.value);
                }
            }
        });
    </script>
    <!-- å› ä¸º AJAX åº“å’Œé€šç”¨å·¥å…·çš„ç”Ÿæ€å·²ç»ç›¸å½“ä¸°å¯Œï¼ŒVue æ ¸å¿ƒä»£ç æ²¡æœ‰é‡å¤ -->
    <!-- æä¾›è¿™äº›åŠŸèƒ½ä»¥ä¿æŒç²¾ç®€ã€‚è¿™ä¹Ÿå¯ä»¥è®©ä½ è‡ªç”±é€‰æ‹©è‡ªå·±æ›´ç†Ÿæ‚‰çš„å·¥å…·ã€‚ -->
    <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
</body>
</html>
